<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pooshtis - Single Screen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

    <style>
        /* Make sure the HTML & body take full height and hide any scrolling */
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        /* Fixed-height navbar (typical Bootstrap navbar is ~56px high) */
        nav.navbar {
            height: 56px;
        }

        /* 
      The main container fills the rest of the screen 
      after accounting for the navbarâ€™s 56px height.
    */
        #petContainer {
            height: calc(100vh - 56px);
            width: 100%;
            /* Background that covers the entire area */
            background: url('CAT2.PNG') no-repeat center center;
            background-size: cover;

            /* Flex layout to position elements inside */
            display: flex;
            flex-direction: column;
            justify-content: center;
            /* or space-around, space-evenly, etc. */
            align-items: center;
            text-align: center;
            /* Just for neatness if you want center text */
        }

        /* Make your health bar, buttons, etc., scale or remain small enough 
       to fit comfortably. Adjust as needed.
    */
        #healthBarContainer {
            width: 200px;
            height: 20px;
            background-color: #ccc;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            margin: 8px 0;
        }

        #healthBar {
            height: 100%;
            border-radius: 5px 0 0 5px;
            transition: width 0.3s ease;
            background-color: #76c7c0;
            width: 100%;
        }

        /* Sick message hidden by default */
        #statusMessage {
            display: none;
            color: red;
            font-weight: bold;
            margin: 8px 0;
        }

        /* Buttons & selector spacing */
        .controls-container,
        .food-selector-container {
            margin: 8px 0;
        }
    </style>
</head>

<body class="bg-light">
    <!-- NAVBAR (fixed height) -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">PetPal</span>
        </div>
    </nav>

    <!-- MAIN CONTAINER (fills the rest of the screen) -->
    <div id="petContainer">
        <!-- Title or pet name -->
        <h2 class="text-light mb-3">Pooshtis</h2>

        <!-- Health Bar -->
        <div id="healthBarContainer">
            <div id="healthBar"></div>
        </div>

        <!-- Controls (Feed button) -->
        <div class="controls-container">
            <button id="feedBtn" class="btn btn-primary">Feed</button>
        </div>

        <!-- Food Selector -->
        <div class="food-selector-container">
            <label for="foodSelector" class="text-light">Choose food:</label>
            <select id="foodSelector" class="form-select d-inline-block w-auto ms-2">
                <option value="apple">Apple</option>
                <option value="orange">Orange</option>
                <option value="banana">Banana</option>
            </select>
        </div>

        <!-- Sick Status -->
        <div id="statusMessage">Your pet is sick!</div>
    </div>

    <!-- Bootstrap JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
    </script>

    <!-- Your PetPal script -->
    <script>
        /**
         * PetPal Mechanics (No Login)
         */
        // Grab relevant DOM elements
        const petContainer = document.getElementById("petContainer");
        const petDisplay = document.getElementById("petContainer");  // In this layout, the BG is on #petContainer
        const feedBtn = document.getElementById("feedBtn");
        const statusMessage = document.getElementById("statusMessage");

        // Health bar
        const healthBar = document.getElementById("healthBar");
        let currentHealth = 100;       // current health value
        const maxHealth = 100;         // maximum health
        const sickThreshold = 30;      // below this, pet is sick

        // Interval for decreasing health over time
        let healthDecreaseInterval;

        // Once the page loads, initialize the pet
        window.addEventListener("load", function () {
            initPet();
        });

        // Food effects (health values)
        const foodEffects = {
            apple: 10,   // Apple restores 10 health
            orange: 30,  // Orange restores 30 health
            banana: 90   // Banana restores 90 health
        };

        function initPet() {
            // Start with full health
            currentHealth = maxHealth;
            updateHealthBar();

            // Example: decrease health every 0.1 second (100ms)
            healthDecreaseInterval = setInterval(() => {
                decreaseHealth(1);
            }, 10);
        }

        function decreaseHealth(amount) {
            currentHealth -= amount;
            if (currentHealth < 0) {
                currentHealth = 0;
            }
            updateHealthBar();
        }

        feedBtn.addEventListener("click", function () {
            // Get the selected food from the dropdown
            const foodSelector = document.getElementById("foodSelector");
            const selectedFood = foodSelector.value;
            // Get the health effect
            const healthIncrease = foodEffects[selectedFood] || 0;

            // Increase the pet's health
            currentHealth += healthIncrease;
            if (currentHealth > maxHealth) {
                currentHealth = maxHealth;
            }

            // Temporarily change background if you want an 'eating' state
            // If you want an image swap, you'd do it on #petContainer or another element:
            petContainer.style.backgroundImage = "url('CAT22.PNG')";
            setTimeout(() => {
                petContainer.style.backgroundImage = "url('CAT2.PNG')";
            }, 100);

            updateHealthBar();
        });

        function updateHealthBar() {
            const healthPercent = (currentHealth / maxHealth) * 100;
            healthBar.style.width = healthPercent + "%";

            // Sick if below threshold
            if (currentHealth < sickThreshold) {
                statusMessage.style.display = "block";
            } else {
                statusMessage.style.display = "none";
            }
        }
    </script>
</body>

</html>