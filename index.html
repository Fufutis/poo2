<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pooshtis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

    <style>
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        /* Fixed-height navbar (typical Bootstrap ~56px) */
        nav.navbar {
            height: 56px;
        }

        #feedBtn {
            /* Position near the bottom */
            position: absolute;
            bottom: 25px;
            /* Distance from the bottom of the container */
            left: 48.8%;
            transform: translateX(-50%);
            /* Center horizontally */

            /* Custom color styling */
            background-color: rgb(0, 26, 59);
            /* Black background */
            color: white;
            /* White text */
            border: 2px solid black;
            /* Optional border */
            padding: 6px 44px;
            /* Adjust padding for better size */
            font-size: 1rem;
            /* Adjust font size */
            border-radius: 5px;
            /* Optional: rounded corners */
            cursor: pointer;
        }

        #feedBtn:hover {
            background-color: rgb(1, 34, 77);
            /* Slightly lighter on hover */
        }

        /* 
      The main container fills the rest of the screen
      (100vh - navbarHeight). We'll rely on media queries
      to pick the correct background image by default.
    */
        #petContainer {
            height: calc(100vh - 56px);
            width: 100%;

            /* 
        By default (portrait), let's show the tall cat image.
        We'll override in landscape with a different image.
      */
            background: url('CAT2.PNG') no-repeat center center;
            background-size: 100% 100%;
            /* Fill container width; keep aspect ratio */
            background-position: top center;
            /* or 'center center' */

            /* Flex layout to position elements inside (vertical by default) */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;

            /* Transition allows a smoother switch if orientation changes */
            transition: background-image 0.1s ease-in-out;
        }

        /* 
      In landscape orientation, swap the default image to the wide version.
      Use contain so it won’t “zoom in.” This may result in letterboxing if the
      container ratio doesn’t match the image ratio. 
    */
        @media (orientation: landscape) {
            #petContainer {
                background: url('WIDECAT.PNG') no-repeat center center;
                background-size: 100% 100%;
            }
        }

        /*
      EATING STATE
      We'll define classes for the "eating" moment. 
      We apply them via JavaScript and rely on orientation queries 
      to pick the correct image.
    */
        #petContainer.eating {
            /* By default (portrait) show CAT22 */
            background: url('CAT22.PNG') no-repeat center center;
            background-size: 100% 100%;
        }

        @media (orientation: landscape) {
            #petContainer.eating {
                /* In landscape, use WIDECAT2 */
                background: url('WIDECAT2.PNG') no-repeat center center;
                background-size: 100% 100%;
            }

            .navbar-brand {
                margin-right: 2rem;
            }

            .navbar-content {
                display: flex;
                flex-wrap: wrap;
                align-items: center;
                gap: 1rem;
            }

            #healthBarContainer {
                width: 200px;
                height: 20px;
                background-color: #ccc;
                border-radius: 5px;
                overflow: hidden;
                position: relative;
            }

            #healthBar {
                height: 100%;
                border-radius: 5px 0 0 5px;
                transition: width 0.1s ease;
                background-color: #76c7c0;
                width: 100%;
            }

            #statusMessage {

                color: red;
                /* Red text */
                font-weight: bold;
                /* Bold text */
                /* Position near the bottom */
                position: absolute;
                bottom: 100px;
                /* Distance from the bottom of the container */
                left: 48.8%;
                transform: translateX(-50%);
                /* Center horizontally */

                display: none;
                /* Initially hidden */
            }

            /* Media queries to adjust styling for smaller screens */
            @media (max-width: 768px) {
                #statusMessage {
                    bottom: 80px;
                    /* Move up slightly for smaller screens */
                    font-size: 1em;
                    /* Reduce font size for better fit */
                }
            }

            @media (max-width: 480px) {
                #statusMessage {
                    bottom: 60px;
                    /* Move up further for very small screens */
                    font-size: 0.9em;
                    /* Further reduce font size */
                }
            }
        }
    </style>
</head>

<body class="bg-light">

    <!-- NAVBAR -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid navbar-content">
            <!-- Title -->
            <h2 class="text-light mb-0">Pooshtis</h2>
            <!-- Health Bar -->
            <div id="healthBarContainer">
                <div id="healthBar"></div>
            </div>

            <!-- Food Selector -->
            <div>
                <label for="foodSelector" class="text-light mb-0">Food:</label>
                <select id="foodSelector" class="form-select d-inline-block w-auto ms-2">
                    <option value="apple">Apple</option>
                    <option value="orange">Orange</option>
                    <option value="banana">Banana</option>
                </select>
            </div>

        </div>
    </nav>

    <!-- MAIN CONTAINER FOR PET DISPLAY -->
    <div id="petContainer">
        <!-- Feed Button -->
        <button id="feedBtn" class="feedBtn">Feed</button>
        <!-- Sick Status -->
        <span id="statusMessage">Your pet is sick!</span>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- PetPal Script -->
    <script>
        const petContainer = document.getElementById("petContainer");
        const feedBtn = document.getElementById("feedBtn");
        const healthBar = document.getElementById("healthBar");
        const statusMessage = document.getElementById("statusMessage");
        const foodSelector = document.getElementById("foodSelector");

        let currentHealth = 100;
        const maxHealth = 100;
        const sickThreshold = 30;
        let healthDecreaseInterval;

        const foodEffects = {
            apple: 10,
            orange: 30,
            banana: 90
        };

        window.addEventListener("load", function () {
            initPet();
        });

        function initPet() {
            currentHealth = maxHealth;
            updateHealthBar();
            healthDecreaseInterval = setInterval(() => decreaseHealth(1), 100);
        }

        function decreaseHealth(amount) {
            currentHealth -= amount;
            if (currentHealth < 0) currentHealth = 0;
            updateHealthBar();
        }

        feedBtn.addEventListener("click", function () {
            const selectedFood = foodSelector.value;
            const healthIncrease = foodEffects[selectedFood] || 0;
            currentHealth += healthIncrease;
            if (currentHealth > maxHealth) currentHealth = maxHealth;

            petContainer.classList.add("eating");
            setTimeout(() => petContainer.classList.remove("eating"), 500);
            updateHealthBar();
        });

        function updateHealthBar() {
            const healthPercent = (currentHealth / maxHealth) * 100;
            healthBar.style.width = `${healthPercent}%`;
            statusMessage.style.display = currentHealth < sickThreshold ? "block" : "none";
        }
    </script>

</body>

</html>