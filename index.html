<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Pooshtis</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap CSS (CDN) -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" />

    <style>
        /* Make sure the HTML & body take full height and hide any scrolling */
        html,
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }

        /* Fixed-height navbar (typical Bootstrap ~56px) */
        nav.navbar {
            height: 56px;
        }

        /* 
      The main container fills the rest of the screen
      (100vh - navbarHeight). We'll rely on media queries
      to pick the correct background image by default.
    */
        #petContainer {
            height: calc(100vh - 56px);
            width: 100%;

            /* 
        By default (portrait), let's show the tall cat image.
        We'll override in landscape with a different image.
      */
            background: url('CAT2.PNG') no-repeat center center;
            background-size: 100% 100%;
            /* Fill container width; keep aspect ratio */
            background-position: top center;
            /* or 'center center' */

            /* Flex layout to position elements inside (vertical by default) */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;

            /* Transition allows a smoother switch if orientation changes */
            transition: background-image 0.1s ease-in-out;
        }

        /* 
      In landscape orientation, swap the default image to the wide version.
      Use contain so it won’t “zoom in.” This may result in letterboxing if the
      container ratio doesn’t match the image ratio. 
    */
        @media (orientation: landscape) {
            #petContainer {
                background: url('WIDECAT.PNG') no-repeat center center;
                background-size: 100% 100%;
            }
        }

        /*
      EATING STATE
      We'll define classes for the "eating" moment. 
      We apply them via JavaScript and rely on orientation queries 
      to pick the correct image.
    */
        #petContainer.eating {
            /* By default (portrait) show CAT22 */
            background: url('CAT22.PNG') no-repeat center center;
            background-size: 100% 100%;
        }

        @media (orientation: landscape) {
            #petContainer.eating {
                /* In landscape, use WIDECAT2 */
                background: url('WIDECAT2.PNG') no-repeat center center;
                background-size: 100% 100%;
            }
        }

        /* Health bar, etc. */
        #healthBarContainer {
            width: 200px;
            height: 20px;
            background-color: #ccc;
            border-radius: 5px;
            overflow: hidden;
            position: relative;
            margin: 8px 0;
        }

        #healthBar {
            height: 100%;
            border-radius: 5px 0 0 5px;
            transition: width 0.1s ease;
            background-color: #76c7c0;
            width: 100%;
        }

        /* Sick message hidden by default */
        #statusMessage {
            display: none;
            color: red;
            font-weight: bold;
            margin: 8px 0;
        }

        /* Buttons & selector spacing */
        .controls-container,
        .food-selector-container {
            margin: 8px 0;
        }
    </style>
</head>

<body class="bg-light">
    <!-- NAVBAR (fixed height) -->
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand mb-0 h1">PetPal</span>
        </div>
    </nav>

    <!-- MAIN CONTAINER (fills the rest of the screen) -->
    <div id="petContainer">
        <!-- Title or pet name -->
        <h2 class="text-light mb-3">Pooshtis</h2>

        <!-- Health Bar -->
        <div id="healthBarContainer">
            <div id="healthBar"></div>
        </div>

        <!-- Controls (Feed button) -->
        <div class="controls-container">
            <button id="feedBtn" class="btn btn-primary">Feed</button>
        </div>

        <!-- Food Selector -->
        <div class="food-selector-container">
            <label for="foodSelector" class="text-light">Choose food:</label>
            <select id="foodSelector" class="form-select d-inline-block w-auto ms-2">
                <option value="apple">Apple</option>
                <option value="orange">Orange</option>
                <option value="banana">Banana</option>
            </select>
        </div>

        <!-- Sick Status -->
        <div id="statusMessage">Your pet is sick!</div>
    </div>

    <!-- BOOTSTRAP JS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js">
    </script>

    <!-- Your PetPal script -->
    <script>
        /**
         * PetPal Mechanics (No Login)
         */
        // Grab relevant DOM elements
        const petContainer = document.getElementById("petContainer");
        const feedBtn = document.getElementById("feedBtn");
        const statusMessage = document.getElementById("statusMessage");
        const healthBar = document.getElementById("healthBar");

        let currentHealth = 100;
        const maxHealth = 100;
        const sickThreshold = 30;
        let healthDecreaseInterval;

        // Food effects
        const foodEffects = {
            apple: 10,
            orange: 30,
            banana: 90
        };

        window.addEventListener("load", function () {
            initPet();
        });

        function initPet() {
            // Start full health
            currentHealth = maxHealth;
            updateHealthBar();

            // Decrease health every 100ms (adjust to taste)
            healthDecreaseInterval = setInterval(() => {
                decreaseHealth(1);
            }, 100);
        }

        function decreaseHealth(amount) {
            currentHealth -= amount;
            if (currentHealth < 0) {
                currentHealth = 0;
            }
            updateHealthBar();
        }

        feedBtn.addEventListener("click", function () {
            const foodSelector = document.getElementById("foodSelector");
            const selectedFood = foodSelector.value;
            const healthIncrease = foodEffects[selectedFood] || 0;

            currentHealth += healthIncrease;
            if (currentHealth > maxHealth) {
                currentHealth = maxHealth;
            }

            // Toggle "eating" state to switch images based on orientation
            petContainer.classList.add("eating");
            setTimeout(() => {
                petContainer.classList.remove("eating");
            }, 150); // half a second

            updateHealthBar();
        });

        function updateHealthBar() {
            const healthPercent = (currentHealth / maxHealth) * 100;
            healthBar.style.width = healthPercent + "%";

            if (currentHealth < sickThreshold) {
                statusMessage.style.display = "block";
            } else {
                statusMessage.style.display = "none";
            }
        }
    </script>
</body>

</html>